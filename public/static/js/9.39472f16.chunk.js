(this.webpackJsonpcloudEmperor=this.webpackJsonpcloudEmperor||[]).push([[9],{572:function(e,t,n){e.exports=n(580)},573:function(e,t){e.exports={BASE_API:"http://192.168.1.117:3000",ENTERPRISE:"xxx",PLATFORM:"xxx",projectName:"development"}},579:function(e,t,n){"use strict";var a=n(572),r={base:n.n(a).a.BASE_API,login:{login:function(){return"/admin/admin_login"},register:function(){return"/admin/user_register"}},new:{details:function(){return"/news/get"}}};t.a=r},580:function(e,t){e.exports={BASE_API:"http://192.168.1.117:3000",ENTERPRISE:"xxx",PLATFORM:"xxx",projectName:"production"}},581:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return p}));n(585);var a=n(586),r=n.n(a),o=n(593),c=n.n(o),s=n(572),i=function(e){r.a.error(e)},u=function(){console.log("\u5230\u767b\u5f55\u9875")};c.a.create({timeout:5e3}),c.a.defaults.baseURL=s.BASE_API,c.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",c.a.interceptors.request.use((function(e){var t=localStorage.getItem("x_token");return t&&(e.headers["X-Token"]=t),e}),(function(e){return Promise.error(e)})),c.a.interceptors.response.use((function(e){return 200===e.status?Promise.resolve(e):Promise.reject(e)}),(function(e){var t=e.response;if(t)return function(e,t){switch(e){case 401:u();break;case 403:i("\u767b\u5f55\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55"),localStorage.removeItem("x_token"),setTimeout((function(){u()}),1e3);break;case 404:i("\u8bf7\u6c42\u7684\u8d44\u6e90\u4e0d\u5b58\u5728");break;case 500:i("\u670d\u52a1\u5668\u5f02\u5e38");break;default:console.log(t)}}(t.status,t.data.message),Promise.reject(t)}));var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,a){c.a.get(e,{params:t}).then((function(e){n(e.data)})).catch((function(e){a(e)}))}))},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,a){c.a.post(e,t).then((function(e){n(e.data)}),(function(e){a(e)}))}))},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,a){c.a.delete(e,{params:t}).then((function(e){n(e.data)})).catch((function(e){a(e)}))}))}},663:function(e,t,n){},681:function(e,t,n){e.exports=n.p+"static/media/bg-login.67ca5133.jpg"},900:function(e,t,n){"use strict";n.r(t);n(253);var a=n(575),r=n.n(a),o=(n(655),n(682)),c=n.n(o),s=(n(606),n(631)),i=n.n(s),u=(n(660),n(104)),l=n.n(u),m=n(41),p=n(42),d=n(43),f=n(44),h=(n(607),n(616)),g=n.n(h),E=n(0),b=n.n(E),v=n(62),x=n(129),S=(n(663),n(65)),y=n(579),N=n(581),I=[{name:"\u6570\u636e\u770b\u677f",icon:"icon-jifen",path:"/home",children:[]},{name:"\u65b0\u95fb\u653f\u52a1",icon:"icon-office",path:"/news",children:[]},{name:"\u7528\u6237\u7ba1\u7406",icon:"icon-supplierfeatures",path:"",children:[{path:"",icon:"icon-imagetext",name:"\u4fe1\u606f\u7ef4\u62a4",children:[{path:"/userModules/userManagement",name:"\u521b\u5efa\u7528\u6237"},{path:"/news/industryNews",name:"\u89d2\u8272\u7ba1\u7406"}]},{path:"/demo",icon:"icon-libra",name:"\u4e2a\u4eba\u4fe1\u606f",children:[]}]},{name:"\u7cfb\u7edf\u7ba1\u7406",icon:"icon-set",path:"",children:[{path:"",icon:"icon-electronics",name:"\u7cfb\u7edf\u6743\u9650",children:[{path:"/systemModules/directoryManagement",name:"\u76ee\u5f55\u7ba1\u7406"},{path:"/business/smartCampusfr",name:"\u65e5\u5fd7\u7ba1\u7406"},{path:"/business/governmentAffairs",name:"\u5b57\u5178\u7ba1\u7406"}]}]}],w=n(681),P=function(e,t,n){g.a[e]({message:n||e,description:t})},j=function(e){Object(f.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).getMenus=function(){setTimeout((function(){localStorage.setItem("modules",JSON.stringify(I)),e.props.setHeaderMenuFn(I),e.props.setSiderMenuFn(I[0].children);var t="";t=I[0].path?I[0].path:I[0].children[0].path,e.props.history.push(t)}),500)},e.handleSubmit=function(t){t.preventDefault(),e.props.history.push("/home"),e.props.form.validateFields((function(t,n){t||Object(N.c)(y.a.login.login(),n).then((function(t){console.log(t),200===t.status?(localStorage.setItem("userName",t.data.userName),P("success",t.message),e.getMenus()):P("error",t.message)})).catch((function(e){console.log(e)}))}))},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){localStorage.removeItem("userName"),localStorage.removeItem("modules"),localStorage.removeItem("activeRouteIndex")}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return b.a.createElement("div",{className:"loginBox"},b.a.createElement("header",{className:"login-header"},b.a.createElement("img",{src:n(263)}),b.a.createElement("span",null,"CloudEmperor\u7ba1\u7406\u7cfb\u7edf")),b.a.createElement("section",{className:"login-section",style:{background:"url(".concat(w,") no-repeat center center"),backgroundSize:"cover"}},b.a.createElement("div",{className:"login-content"},b.a.createElement(c.a,{onSubmit:this.handleSubmit,className:"loginForm"},b.a.createElement("p",{className:"enter-title"},"\u767b\xa0\u5f55"),b.a.createElement(c.a.Item,null,e("userName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d26\u53f7"}]})(b.a.createElement(i.a,{prefix:b.a.createElement(l.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u8d26\u53f7"}))),b.a.createElement(c.a.Item,null,e("passWord",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}]})(b.a.createElement(i.a,{onPressEnter:this.handleSubmit,prefix:b.a.createElement(l.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u5bc6\u7801"}))),b.a.createElement(c.a.Item,null,b.a.createElement(r.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"\u767b\xa0\xa0\xa0\xa0\u5f55"))))),b.a.createElement("footer",{className:"login-footer"},b.a.createElement("p",null,"\u897f\u5b89CloudEmperor\u79d1\u6280\u6709\u9650\u516c\u53f8 \xae\u7248\u6743\u6240\u6709 \xa92020-2038\uff0c\u4fdd\u7559\u6240\u6709\u6743\u5229\u3002"),b.a.createElement("p",null,"CloudEmperor\u2014\u2014\u5168\u9762\u5b89\u5168\uff0c\u8d85\u8d8a\u6240\u60f3\uff01")))}}]),a}(b.a.Component),k=c.a.create({name:"normal_login"})(j);t.default=Object(v.b)((function(e){return{}}),(function(e){return{setHeaderMenuFn:function(t){return e(Object(x.b)(t))},setSiderMenuFn:function(t){return e(Object(x.c)(t))}}}))(Object(S.g)(k))}}]);
//# sourceMappingURL=9.39472f16.chunk.js.map